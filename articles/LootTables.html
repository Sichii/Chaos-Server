<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Loot Tables | Chaos Server Docs </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Loot Tables | Chaos Server Docs ">
      
      <link rel="icon" href="../images/chaos.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/Sichii/Chaos-Server/blob/release/v1.9/docs/articles/LootTables.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/chaosico.png" alt="Chaos Server Docs">
            Chaos Server Docs
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="loot-tables">Loot Tables</h1>

<p>Loot Tables in Chaos are used to determine the items that are dropped when a creature is killed. Loot tables can be
specified per-monster, or per-monster-per-mapInstance. Loot tables are not intended to be edited in code, only in json.</p>
<h2 id="how-do-i-create-them">How do I create them?</h2>
<p>By default, loot tables should be created in <code>Data\Configuration\LootTables</code>. Configuration of how loot tables
are loaded can be found in <code>appsettings.json</code> at <code>Options:LootTableCacheOptions</code>.</p>
<p>Loot tables are a collection of loot drops</p>
<p>Loot tables are initially serialized into <a class="xref" href="../api/Chaos.Schemas.Content.LootTableSchema.html">LootTableSchema</a> before being
mapped to a <a class="xref" href="../api/Chaos.Collections.LootTable.html">LootTable</a>. The schema object is mapped via
the <a class="xref" href="../api/Chaos.Services.MapperProfiles.LootTableMapperProfile.html">LootTableMapperProfile</a>.</p>
<p>Loot drops are initially serialized into <a class="xref" href="../api/Chaos.Schemas.Data.LootDropSchema.html">LootDropSchema</a> before being mapped
to a <a class="xref" href="../api/Chaos.Models.Data.LootDrop.html">LootDrop</a>. The schema object is mapped via
the <a class="xref" href="../api/Chaos.Services.MapperProfiles.LootTableMapperProfile.html">LootTableMapperProfile</a>.</p>
<p>See <a class="xref" href="../api/Chaos.Schemas.Data.LootDropSchema.html">LootDropSchema</a> for a list of all configurable properties with
descriptions.</p>
<p>Keep in mind, loot tables are a collection of loot drops. This is expressed in json as a json array of loot drop
objects.</p>
<h2 id="how-do-i-use-them">How do I use them?</h2>
<h3 id="attach-loot-tables-to-monsters">Attach loot tables to monsters</h3>
<p>Loot tables are not used directly in code. Instead, they reference by their key. You can attach loot tables to monsters
directly by adding the loot table key to the monster's <code>LootTableKeys</code> property in json.</p>
<h4 id="example-monster-json">Example monster json</h4>
<pre><code class="lang-json">{
    &quot;aggroRange&quot;: 6,
    &quot;assailIntervalMs&quot;: 1500,
    &quot;expReward&quot;: 50,
    &quot;lootTableKeys&quot;: [&quot;testAreaRats&quot;],
    &quot;maxGoldDrop&quot;: 30,
    &quot;minGoldDrop&quot;: 10,
    &quot;moveIntervalMs&quot;: 1500,
    &quot;name&quot;: &quot;Common Rat&quot;,
    &quot;scriptKeys&quot;: [&quot;default&quot;],
    &quot;scriptVars&quot;: {},
    &quot;skillIntervalMs&quot;: 1500,
    &quot;skillTemplateKeys&quot;: [&quot;Assail&quot;],
    &quot;spellIntervalMs&quot;: 10000,
    &quot;spellTemplateKeys&quot;: [],
    &quot;sprite&quot;: 959,
    &quot;statSheet&quot;: {
        &quot;level&quot;: 1,
        &quot;ac&quot;: 50,
        &quot;maximumHp&quot;: 100,
        &quot;maximumMp&quot;: 100,
        &quot;con&quot;: 2,
        &quot;dex&quot;: 1,
        &quot;int&quot;: 1,
        &quot;str&quot;: 1,
        &quot;wis&quot;: 1
    },
    &quot;templateKey&quot;: &quot;common_rat&quot;,
    &quot;type&quot;: &quot;Normal&quot;,
    &quot;wanderIntervalMs&quot;: 2000
}
</code></pre><h3 id="attach-loot-tables-to-monster-spawns">Attach loot tables to monster spawns</h3>
<p>Alternatively, you can attach loot tables to monsters on a per-mapInstance basis by adding the loot table key to the
monster spawn json.</p>
<h4 id="example-monster-spawn-json">Example monster spawn json</h4>
<pre><code class="lang-json">[
  {
    &quot;blackList&quot;: [],
    &quot;extraLootTableKeys&quot;: [
      &quot;testAreaRats&quot;
    ],
    &quot;extraScriptKeys&quot;: [],
    &quot;intervalSecs&quot;: 30,
    &quot;intervalVariancePct&quot;: 50,
    &quot;maxAmount&quot;: 30,
    &quot;maxPerSpawn&quot;: 20,
    &quot;monsterTemplateKey&quot;: &quot;common_rat&quot;
  }
]
</code></pre><h2 id="mode">Mode</h2>
<p>Loot tables can be configured to drop items in one of two modes: <code>ChancePerItem</code> or <code>PickSingleOrDefault</code>.</p>
<h3 id="chanceperitem">ChancePerItem</h3>
<p>When in <code>ChancePerItem</code> mode, each item in the loot table has a chance to drop. This means that multiple items can drop
at the same time, and each roll is treated individually.</p>
<h3 id="picksingleordefault">PickSingleOrDefault</h3>
<p>When in <code>PickSingleOrDefault</code> mode, at most only 1 item may drop. First, a check is made to determine if any item WOULD
drop if all drops were rolled individually. If this check succeeds, a single item is picked using the drop chances as
weights. If this check fails, no item is dropped.</p>
<h3 id="mode-combinations">Mode combinations</h3>
<p>Each loot table has it's own mode, but monsters can have multiple loot tables. Keep in mind that each loot table is
treated separately. If you have 5 loot table keys on a monster that are all in <code>PickSingleOrDefault</code> mode, you could
potentially drop 5 items at once.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/Sichii/Chaos-Server/blob/release/v1.9/docs/articles/LootTables.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
